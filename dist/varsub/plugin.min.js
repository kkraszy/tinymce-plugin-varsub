(()=>{var b=function(){return(b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function y(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var n='<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">\n<defs>\n<image id="image5" width="16" height="16" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAIhAAACIQBDVcC+gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEdSURBVDiNrZO9SkNhDIaf90u+digUETfBSaS4CQ4FcRA3cXL1DqSDk3bR2d6Lo6tTdVa3om5dvAAHEds42MI5Q4XjMRDI8iZ58qOIoI4JGh1L0SeiU02p0WSqK5n8Dtj5YwP3MnktBgeI4FzEcxVhoA2JASaPTO5GBFU8k7smj1TMmpX3TY0egCSXtDyLW5Lc1Ohl5d2ippQgxEkiHiQp4acmf3P5kclfDDtOxFMk9UosRQSXj4CVeZsmvzX5NTTXZ8VWk/yxiODlwTCG5pKkT8P2kN6BtYiP1x+UZltMx4sRgqHxtW3YQUiXCgbApilfSDJjshXBcCEC0E74WXHaQJrHCe8DrSJC7TXOT5kIbn4/nbJJHMJ/PFPdd/4GmbC50iuAzSQAAAAASUVORK5CYII="/>\n</defs>\n<g id="surface2">\n<use xlink:href="#image5"/>\n</g>\n</svg>',r={start:"{{",end:"}}"};function i(e){return e.start||(e.start=r.start),e.end||(e.end=r.end),!0}function e(u,e){u.options.isRegistered("varsub")||u.options.register("varsub",{processor:i,immutable:!0,default:r});var t,s,p,d=u.options.get("varsub");null!=(t=null==d?void 0:d.variables)&&t.length&&(u.ui.registry.addIcon("varsub",n),s=function(e,t){function n(r){if(S(r))return t.withSeparator&&a.push({type:"menuitem",text:"-â€”-".repeat(5),enabled:!1});var e={type:"menuitem",text:r.label||r.code,onAction:function(){t=r.code,e=r.example,e=Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e,e=tinymce.html.Node.create("span",{class:"varsub-var","data-varsub-var":t,"data-varsub-example":String(e)||""}),(n=tinymce.html.Node.create("#text")).value=d.start+t+d.end,e.append(n);t=e;var e,t,n=tinymce.html.Serializer().serialize(t);u.insertContent(n)},enabled:!0};x(r)&&(e=b(b({},e),{type:"nestedmenuitem",getSubmenuItems:function(){return s(r.items)}})),a.push(e)}void 0===t&&(t={});var r,i,a=[];try{for(var l=y(e),o=l.next();!o.done;o=l.next())n(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return a},p=function(e,t){var n,r,i,a,l,o,u,s,d,c,A,v=[];try{for(var h=y(t),m=h.next();!m.done;m=h.next()){var g,f=m.value;S(f)||(x(f)?0<(g=p(e,f.items)).length&&v.push(b(b({},f),{items:g})):(null!=(l=null==(a=null==(i=f.code)?void 0:i.toLowerCase)?void 0:a.call(i))&&l.includes(e)||null!=(s=null==(u=null==(o=f.label)?void 0:o.toLowerCase)?void 0:u.call(o))&&s.includes(e)||null!=(A=null==(c=null==(d=String(f.example))?void 0:d.toLowerCase)?void 0:c.call(d))&&A.includes(e))&&v.push(f))}}catch(e){n={error:e}}finally{try{m&&!m.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return v},u.ui.registry.addMenuButton("varsub",{icon:"varsub",tooltip:"Insert Variable",search:{placeholder:"Filter variables"},fetch:function(e,t){t.pattern?0===(t=p(t.pattern,d.variables)).length?e([{type:"menuitem",text:"No results",enabled:!1}]):e(s(t)):e(s(d.variables,{withSeparator:!0}))}}))}var t=Symbol("separator");function S(e){return e===t||"SEPARATOR"===e||String(e)===String(t)||e.code===t||String(e.code)===String(t)||"SEPARATOR"===e.code}function x(e){return void 0!==e.items}tinymce.PluginManager.add("varsub",e)})();