(()=>{var g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function w(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var r='<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M19.9061 21C21.2464 18.2888 22 15.2329 22 12C22 8.76711 21.2464 5.71116 19.9061 3M4.09393 3C2.75363 5.71116 2 8.76711 2 12C2 15.2329 2.75363 18.2888 4.09393 21M16.5486 8.625H16.459C15.8056 8.625 15.1848 8.91202 14.7596 9.41072L9.38471 15.7143C8.95948 16.213 8.33871 16.5 7.6853 16.5H7.59563M8.71483 8.625H10.1089C10.6086 8.625 11.0477 8.95797 11.185 9.44094L12.9594 15.6841C13.0967 16.167 13.5358 16.5 14.0355 16.5H15.4296" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',n={start:"{{",end:"}}"};function a(e){return e.start||(e.start=n.start),e.end||(e.end=n.end),!0}function e(u,e){u.options.isRegistered("varsub")||u.options.register("varsub",{processor:a,immutable:!0,default:n});var t,s,y,d=u.options.get("varsub");null!=(t=null==d?void 0:d.variables)&&t.length&&(u.ui.registry.addIcon("varsub",r),s=function(e,t){function r(n){if(x(n))return t.withSeparator&&o.push({type:"menuitem",text:"-â€”-".repeat(5),enabled:!1});var e={type:"menuitem",text:n.label||n.code,onAction:function(){t=n.code,e=n.example,e=Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e,e=tinymce.html.Node.create("span",{class:"varsub-var","data-varsub-var":t,"data-varsub-example":String(e)||""}),(r=tinymce.html.Node.create("#text")).value=d.start+t+d.end,e.append(r);t=e;var e,t,r=tinymce.html.Serializer().serialize(t);u.insertContent(r)},enabled:!0};S(n)&&(e=g(g({},e),{type:"nestedmenuitem",getSubmenuItems:function(){return s(n.items)}})),o.push(e)}void 0===t&&(t={});var n,a,o=[];try{for(var i=w(e),l=i.next();!l.done;l=i.next())r(l.value)}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return o},y=function(e,t){var r,n,a,o,i,l,u,s,d,c,v,p=[];try{for(var f=w(t),h=f.next();!h.done;h=f.next()){var m,b=h.value;x(b)||(S(b)?0<(m=y(e,b.items)).length&&p.push(g(g({},b),{items:m})):(null!=(i=null==(o=null==(a=b.code)?void 0:a.toLowerCase)?void 0:o.call(a))&&i.includes(e)||null!=(s=null==(u=null==(l=b.label)?void 0:l.toLowerCase)?void 0:u.call(l))&&s.includes(e)||null!=(v=null==(c=null==(d=String(b.example))?void 0:d.toLowerCase)?void 0:c.call(d))&&v.includes(e))&&p.push(b))}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}return p},u.ui.registry.addMenuButton("varsub",{icon:"varsub",tooltip:"Insert Variable",search:{placeholder:"Filter variables"},fetch:function(e,t){t.pattern?0===(t=y(t.pattern,d.variables)).length?e([{type:"menuitem",text:"No results",enabled:!1}]):e(s(t)):e(s(d.variables,{withSeparator:!0}))}}))}var t=Symbol("separator");function x(e){return e===t||"SEPARATOR"===e||String(e)===String(t)||e.code===t||String(e.code)===String(t)||"SEPARATOR"===e.code}function S(e){return void 0!==e.items}tinymce.PluginManager.add("varsub",e)})();